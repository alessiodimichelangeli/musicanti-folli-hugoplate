{{ define "main" }}
{{/* Prendiamo l'immagine di sfondo dalla cartella /assets */}}
{{ $bg_image := resources.Get "images/background.jpg" }}

<main class="main">
  <section id="hero" class="section" style="background-image: linear-gradient(rgba(86, 7, 37, 0.7), rgba(86, 7, 37, 0.7)), url('{{ $bg_image.RelPermalink }}');">
    <div class="container">
      {{/* Controlliamo se esistono i dati del banner nel file _index.md */}}
      {{ with .Params.banner }}

        {{/* 1. Mostriamo il logo in alto */}}
        <div class="logo-container">
          <img src="{{ .logo }}" alt="Logo Musicanti Folli">
        </div>

        {{/* 2. Sotto il logo, mettiamo il titolo vuoto per l'animazione */}}
        <h1 id="typewriter" class="h1 mb-4" data-strings='{{ .animated_texts | jsonify }}'></h1>

        {{/* 3. E poi il resto del contenuto */}}
        <p class="mb-8">{{ .content | markdownify }}</p>

        {{/* Se il bottone Ã¨ abilitato, lo mostriamo */}}
        {{ if .button.enable }}
          <a class="btn btn-primary" href="{{ .button.link }}">
            {{ .button.label }}
          </a>
        {{ end }}

      {{ end }}
    </div>
  </section>

  {{/* Codice per mostrare le altre sezioni della one-page */}}
  {{ $pages := where .Site.RegularPages "Section" "sezioni" }}
  {{ range $pages.ByWeight }}
    <section id="{{ .File.TranslationBaseName }}" class="section">
      <div class="container">
        <h2 class="h2 text-center mb-8">{{ .Title }}</h2>
        <div class="content">
          {{ .Content }}
        </div>
      </div>
    </section>
  {{ end }}

</main>

{{/* SCRIPT PER L'ANIMAZIONE */}}
<script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function(){
    const typeElement = document.getElementById('typewriter');
    if (typeElement) {
      const stringsData = typeElement.getAttribute('data-strings');
      const stringsToType = JSON.parse(stringsData || '[]');

      var typed = new Typed('#typewriter', {
        strings: stringsToType,
        typeSpeed: 70,
        // backSpeed: 25,
        loop: true,
        showCursor: true,
        cursorChar: '|'
      });
    }
  });
</script>

{{ end }}